import{a as x}from"./with-props-18HQcUlf.js";import{t as g,r as d,l as e}from"./chunk-GNGMS2XR-Mr3CDDLu.js";import{g as b}from"./utils-D27r_kA2.js";function L({}){return[{title:"Add New Trip"},{name:"description",content:"Add a new trip to your trips history"}]}const y="AIzaSyCZ9pIQTPpcj_c3CPJrVXogPztLlFrk64I",N=x(function(){const p=g(),[o,c]=d.useState({currentLocation:"",pickupLocation:"",dropoffLocation:"",cycleHours:""}),[l,u]=d.useState(!1),m=async t=>{u(!0),t.preventDefault();const s=await i(o.currentLocation),n=await i(o.pickupLocation),r=await i(o.dropoffLocation);if(!s){alert("Invalid current location address");return}if(!n){alert("Invalid pickup location address");return}if(!r){alert("Invalid dropoff location address");return}f(s,n,r)},i=async t=>{try{const s=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=${y}`,n=await fetch(s);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);const r=await n.json();if(r.status!=="OK"||r.results.length===0)return console.log("No results found for address:",t),console.log(r),null;const a=r.results[0].geometry.location;return console.log("Coordinates:",a),a}catch(s){return console.error("Error in googleMapsGeocode:",s),null}},f=async(t,s,n)=>{try{const r=await fetch(b()+"/api/trips/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driver:1,current_location:o.currentLocation,pickup_location:o.pickupLocation,dropoff_location:o.dropoffLocation,current_cycle_used:o.cycleHours,current_coordinates:t,pickup_coordinates:s,dropoff_coordinates:n})});if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);const a=await r.json();console.log("Trip saved:",a),p("/trip/"+a.id)}catch(r){console.error("Error saving trip:",r)}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsx("div",{className:"max-w-lg mx-auto py-8 px-4",children:e.jsxs("div",{className:"bg-white rounded-xs shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-6 text-gray-800 text-center",children:"New Trip Entry"}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Current Location"}),e.jsx("input",{type:"text",required:!0,className:"text-sm w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.currentLocation,onChange:t=>c({...o,currentLocation:t.target.value})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Pickup Location"}),e.jsx("input",{type:"text",required:!0,className:"text-sm w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.pickupLocation,onChange:t=>c({...o,pickupLocation:t.target.value})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Dropoff Location"}),e.jsx("input",{type:"text",required:!0,className:"text-sm w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.dropoffLocation,onChange:t=>c({...o,dropoffLocation:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Current Cycle Used (Hours)"}),e.jsx("input",{type:"number",min:"0",max:"70",required:!0,className:"text-sm w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.cycleHours,onChange:t=>c({...o,cycleHours:t.target.value})})]}),e.jsx("button",{type:"submit",disabled:l,className:"bg-[#008080] text-xs font-medium text-white py-2 px-4 rounded-sm hover:bg-[#043f51] transition-colors cursor-pointer",children:l?"Processing...":"Submit"})]})]})})})});export{N as default,L as meta};
